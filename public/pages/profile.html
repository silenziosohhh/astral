<!doctype html>
<html lang="it">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
  <title>Il Mio Profilo - Astral Cup</title>
  <link rel="stylesheet" href="/styles/main.css" />
  <link rel="icon" type="image/x-icon" href="/images/astralcup-logo.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    .social-pill {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      transition: all 0.2s ease;
      text-decoration: none;
      cursor: pointer;
      color: #e2e8f0;
      font-size: 0.85rem;
      font-weight: 500;
      white-space: nowrap;
    }

    #header-socials-container {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    @media (max-width: 768px) {
      #header-socials-container {
        flex-direction: column;
        width: 100%;
      }

      .social-pill {
        width: 100%;
      }
    }

    #profile-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      flex-shrink: 0;
    }

    @media (min-width: 769px) {
      .profile-info-main {
        display: flex !important;
        flex-direction: row !important;
        align-items: center !important;
        justify-content: flex-start !important;
        text-align: left !important;
        gap: 20px;
      }

      #profile-avatar {
        margin: 0 !important;
      }
    }

    @media (max-width: 768px) {
      .profile-header {
        flex-direction: column !important;
        align-items: center !important;
      }

      .profile-info-main {
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
        text-align: center !important;
        gap: 15px;
        width: 100%;
      }

      .profile-info-main>div {
        align-items: center !important;
      }

      .profile-actions-group {
        width: 100%;
        margin-top: 15px;
      }

      .profile-actions-group button {
        flex: 1;
      }
    }
  </style>
</head>

<body>
  <nav class="navbar">
    <div class="navbar-container">
      <a href="/" class="navbar-brand">
        <img src="/images/astralcup.png" alt="Astral Cup Logo" />
        <span>ASTRAL CUP</span>
      </a>
      <div class="navbar-content">
        <ul class="navbar-menu">
          <li><a href="/staff">Staff</a></li>
          <li><a href="/classifica">Classifica</a></li>
          <li><a href="/">Home</a></li>
          <li><a href="/memories">Memories</a></li>
          <li><a href="/tornei">Tornei</a></li>
        </ul>
        <div class="navbar-search-trigger" id="nav-search-trigger">
          <i class="fas fa-search"></i>
        </div>
        <div class="navbar-actions">
          <a href="/discord" class="btn-discord outline-glow"><i class="fab fa-discord"></i> Login</a>
        </div>
        <div class="navbar-login"></div>
      </div>
      <div class="navbar-toggle" id="mobile-menu">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>
    </div>
  </nav>
  <div class="container" style="padding-top: 120px; padding-bottom: 50px;">
    <div id="user-not-found" style="display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 4rem 1rem; min-height: 60vh;">
        <i class="fas fa-user-slash" style="font-size: 8rem; color: #ef4444; margin-bottom: 2rem; filter: drop-shadow(0 0 30px rgba(239, 68, 68, 0.4)); animation: float 6s ease-in-out infinite;"></i>
        <h1 style="font-size: 3rem; margin-bottom: 1rem; color: #fff; font-weight: 800;">Utente non trovato</h1>
        <p style="color: #94a3b8; font-size: 1.2rem; max-width: 500px; margin-bottom: 2rem; line-height: 1.6;">
            Sembra che il profilo che stai cercando non esista o sia stato rimosso.<br>Controlla il nome utente e riprova.
        </p>
        <a href="/" class="btn-visit" style="padding: 12px 30px; font-size: 1.1rem; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);">
            <i class="fas fa-home" style="margin-right: 8px;"></i> Torna alla Home
        </a>
        <style>@keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-20px); } 100% { transform: translateY(0px); } }</style>
    </div>

    <div id="profile-loading" style="display: flex; flex-direction: column; width: 100%; gap: 2rem;">
        <!-- Header Skeleton -->
        <div class="admin-card" style="display: flex; gap: 20px; align-items: center; flex-wrap: wrap;">
            <div class="skeleton skeleton-circle" style="width: 80px; height: 80px;"></div>
            <div style="flex: 1; min-width: 200px;">
                <div class="skeleton skeleton-text" style="width: 200px; height: 28px;"></div>
                <div class="skeleton skeleton-text" style="width: 100px;"></div>
            </div>
            <div class="skeleton" style="width: 120px; height: 40px; border-radius: 8px;"></div>
        </div>
        <!-- Stats Skeleton -->
        <div class="admin-card">
            <div class="skeleton skeleton-text" style="width: 150px; height: 24px; margin-bottom: 2rem;"></div>
            <div class="bw-content-grid">
                <div class="bw-skin-col">
                     <div class="skeleton" style="height: 300px; width: 100%;"></div>
                </div>
                <div class="bw-stats-grid">
                     <div class="skeleton" style="height: 80px;"></div>
                     <div class="skeleton" style="height: 80px;"></div>
                     <div class="skeleton" style="height: 80px;"></div>
                     <div class="skeleton" style="height: 80px;"></div>
                     <div class="skeleton" style="height: 80px;"></div>
                     <div class="skeleton" style="height: 80px;"></div>
                     <div class="skeleton" style="height: 80px;"></div>
                     <div class="skeleton" style="height: 80px;"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="profile-main-content" style="display: none;">
      <div class="profile-header admin-card" style="width: 100%; max-width: 100%;">
      <div class="profile-info-main" style="flex: 1;">
        <div
          style="display: flex; flex-direction: column; gap: 10px; flex-wrap: wrap; align-items: flex-start; justify-content: center;">
          <div style="display: flex; flex-direction: row; gap: 20px; flex-wrap: wrap; align-items: flex-start; justify-content: center;">
            <img id="profile-avatar" src="" alt="Avatar" />
              <div style="display: flex; flex-direction: column; gap: 5px; text-align: left; align-items: left; justify-content: left;">
                  <div style="
                    display: flex;
                    flex-direction: row;
                    flex-wrap: wrap;
                    gap: 10px;
                  ">
                <h1 id="profile-username" style="color: var(--light); font-size: 22px">
                  Caricamento...
                </h1>
                <span id="profile-role" class="role-badge">...</span>
              </div>
              <div style="
                    margin-top: 12px;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                  ">
                <div style="position: relative; width: 100%; max-width: 200px;">
                  <input type="text" id="minecraft-nick" placeholder="Minecraft Nick (Richiesto)" style="
                        background: rgba(0, 0, 0, 0.2);
                        border: 1px solid #334155;
                        color: #fff;
                        padding: 5px 25px 5px 10px;
                        border-radius: 4px;
                        outline: none;
                        font-size: 0.9rem;
                        width: 100%;
                        box-sizing: border-box;
                      " />
                  <i class="fas fa-times" id="clear-mc-nick"
                    style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #94a3b8; display: none; font-size: 0.8rem;"></i>
                </div>
                <button id="save-mc-nick" class="btn-icon" style="
                      background: var(--primary-2);
                      color: #fff;
                      width: 32px;
                      height: 32px;
                      border-radius: 4px;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                    "><i class="fas fa-check"></i></button>
              </div>
            </div>
          </div>
          <div class="socials-wrapper"
            style="display: flex; align-items: flex-start; gap: 10px; flex-wrap: wrap; margin-top: 8px;">
            <div id="header-socials-container" style="display: flex; gap: 8px; flex-wrap: wrap;"></div>
            <button id="edit-socials-btn" class="btn-icon"
              style="background: rgba(255,255,255,0.1); height: 50px; width: auto; display: flex; align-items: center; justify-content: center; border-radius: 10px; border: none; cursor: pointer; color: #fff; font-size: 16px;"><i
                class="fas fa-pen" style="margin-right: 10px; font-size: 15px;"></i> Modifica Links</button>
          </div>
        </div>
      </div>
      <div class="profile-actions-group">
        <button id="btn-share-profile" class="btn-share">
          <i class="fas fa-share"></i> Condividi
        </button>
        <button id="btn-logout-profile" class="btn-visit logout-style">
          <i class="fas fa-sign-out-alt"></i> Logout
        </button>
        <button id="btn-like-profile" class="btn-visit" style="background: rgba(239, 68, 68, 0.1); color: #f87171; border: 1px solid rgba(239, 68, 68, 0.2); display: none;">
          <i class="far fa-heart"></i> <span id="profile-likes-label">Like</span> <span id="profile-likes-count" style="background: rgba(0,0,0,0.2); padding: 2px 6px; border-radius: 10px; font-size: 0.8em; margin-left: 5px;">0</span>
        </button>
      </div>
    </div>
    <div class="admin-card"
      style="margin-top: 2rem; padding: 0; overflow: hidden; position: relative; border: 1px solid rgba(255,255,255,0.05);">
      <div id="bw-card-bg"
        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; filter: blur(30px) brightness(0.5); opacity: 0.6; z-index: 0; transition: all 0.5s ease;">
      </div>
      <div style="position: relative; z-index: 1; padding: 2.5rem;">
        <div
          style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2.5rem; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 1.5rem;">
          <h2
            style="margin: 0; font-size: 2rem; color: #fff; font-weight: 800; display: flex; align-items: center; gap: 12px; letter-spacing: -0.5px;">
            Statistiche BW
          </h2>
        </div>
        <div class="bw-content-grid">
          <div class="bw-skin-col">
            <div class="bw-skin-container" style="position: relative;">
              <img id="bw-skin-render" src="" alt="User Skin"
                style="height: 100%; object-fit: contain; filter: drop-shadow(0 10px 30px var(--glass-light)); z-index: 2; transform: scale(1.1);">
              <div style="position: absolute; bottom: 0; left: 50%; min-width: 100px; transform: translateX(-50%); background: rgba(0,0,0,0.7); padding: 10px 25px; border-radius: 20px; border: 1px solid rgba(59, 130, 246, 0.3); backdrop-filter: blur(5px); z-index: 10; display: flex; flex-direction: column; align-items: center; gap: 0; box-shadow: 0 4px 20px rgba(0,0,0,0.4);">
                 <span style="color: var(--primary-2); font-weight: 800; font-size: 1.5rem; text-shadow: 0 0 20px rgba(59, 130, 246, 0.6); line-height: 1;">
                    <i class="fas fa-star" style="margin-right: 5px; font-size: 1.2rem;"></i><span id="bw-level">0</span>
                 </span>
                 <span style="color: var(--light); font-size: 0.85rem; font-weight: 600; margin-top: 4px; letter-spacing: 0.5px;">
                    <span id="bw-xp">0</span> XP
                 </span>
              </div>
            </div>
          </div>
          <div class="bw-stats-grid">
            <div class="bw-stat-box">
              <div class="bw-stat-label">Uccisioni</div>
              <div class="bw-stat-value" id="bw-kills">0</div>
              <div class="bw-stat-icon"><i class="fas fa-skull"></i></div>
            </div>
            <div class="bw-stat-box">
              <div class="bw-stat-label">Morti</div>
              <div class="bw-stat-value" id="bw-deaths">0</div>
              <div class="bw-stat-icon"><i class="fas fa-skull-crossbones"></i></div>
            </div>
            <div class="bw-stat-box highlight">
              <div class="bw-stat-label">K/D Ratio</div>
              <div class="bw-stat-value" id="bw-kdr">0</div>
              <div class="bw-stat-icon"><i class="fas fa-divide"></i></div>
            </div>
            <div class="bw-stat-box success">
              <div class="bw-stat-label">Vittorie</div>
              <div class="bw-stat-value" id="bw-wins">0</div>
              <div class="bw-stat-icon"><i class="fas fa-trophy"></i></div>
            </div>
            <div class="bw-stat-box danger">
              <div class="bw-stat-label">Sconfitte</div>
              <div class="bw-stat-value" id="bw-losses">0</div>
              <div class="bw-stat-icon"><i class="fas fa-times-circle"></i></div>
            </div>
            <div class="bw-stat-box highlight">
              <div class="bw-stat-label">Final Kills</div>
              <div class="bw-stat-value" id="bw-final-kills">0</div>
              <div class="bw-stat-icon"><i class="fas fa-fist-raised"></i></div>
            </div>
            <div class="bw-stat-box bw-span-2">
              <div class="bw-bar-labels">
                <div class="bw-stat-label"
                  style="color: #fff; margin: 0; display: flex; align-items: center; gap: 6px;">
                  <span
                    style="width: 8px; height: 8px; background: #4ade80; border-radius: 50%; display: inline-block;"></span>
                  Wins <span id="bw-bar-wins" style="color: #fff; font-weight: 800; margin-left: 4px;">0</span>
                </div>
                <div class="bw-stat-label"
                  style="color: #fff; margin: 0; display: flex; align-items: center; gap: 6px;">
                  <span
                    style="width: 8px; height: 8px; background: #f87171; border-radius: 50%; display: inline-block;"></span>
                  Losses <span id="bw-bar-losses" style="color: #fff; font-weight: 800; margin-left: 4px;">0</span>
                </div>
              </div>
              <div
                style="background: rgba(255,255,255,0.1); height: 10px; border-radius: 5px; overflow: hidden; display: flex; z-index: 2; position: relative;">
                <div id="bw-win-bar" style="background: #4ade80; width: 50%; height: 100%; transition: width 1s ease;">
                </div>
                <div id="bw-loss-bar" style="background: #f87171; width: 50%; height: 100%; transition: width 1s ease;">
                </div>
              </div>
              <div
                style="display: flex; justify-content: space-between; margin-top: 6px; z-index: 2; position: relative; font-size: 0.75rem; font-weight: 600; color: #94a3b8;">
                <div id="bw-win-pct">0%</div>
                <div id="bw-loss-pct">0%</div>
              </div>
              <div class="bw-stat-icon" style="opacity: 0.08;"><i class="fas fa-chart-pie"></i></div>
            </div>
            <div class="bw-stat-box">
              <div class="bw-stat-label">Letti Rotti</div>
              <div class="bw-stat-value" id="bw-beds">0</div>
              <div class="bw-stat-icon"><i class="fas fa-bed"></i></div>
            </div>
            <div class="bw-stat-box">
              <div class="bw-stat-label">Winstreak</div>
              <div class="bw-stat-value" id="bw-winstreak">0</div>
              <div class="bw-stat-icon"><i class="fas fa-fire"></i></div>
            </div>
            <div class="bw-stat-box fire">
              <div class="bw-stat-label">Top Winstreak</div>
              <div class="bw-stat-value" id="bw-top-winstreak">0</div>
              <div class="bw-stat-icon"><i class="fas fa-crown"></i></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="admin-card" style="margin-top: 2rem">
      <div style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 10px;
          ">
        <h2 style="margin: 0; font-size: 1.5rem; color: #fff">
          Minecraft Skills
        </h2>
        <button id="edit-skills-btn" class="btn-icon" style="
              background: var(--primary-2);
              color: #000;
              width: 32px;
              height: 32px;
              display: flex;
              align-items: center;
              justify-content: center;
              border-radius: 4px;
              border: none;
              cursor: pointer;
            ">
          <i class="fas fa-pen"></i>
        </button>
      </div>
      <div id="skills-container" style="display: flex; flex-wrap: wrap; gap: 10px">
        <span style="color: #94a3b8; font-style: italic">Caricamento skills...</span>
      </div>
    </div>
    <div class="section-header-flex" style="flex-wrap: wrap; gap: 1rem;">
      <h2 id="memories-title" class="section-title" style="margin-bottom: 0; text-align: left; font-size: 2rem;">
        Le Mie Memories
      </h2>
      <div style="display: flex; gap: 10px; flex-wrap: nowrap; align-items: center; flex-direction: row;">
        <input type="text" id="search-profile-memories" placeholder="Cerca..." style="
              padding: 0.8rem 1rem;
              border-radius: 50px;
              border: 1px solid #334155;
              background: rgba(0, 0, 0, 0.3);
              color: #fff;
              outline: none;
              transition: border-color 0.3s;
              width: 100%;
              max-width: 250px;
              box-sizing: border-box;
            " onfocus="this.style.borderColor='var(--primary-2)'" onblur="this.style.borderColor='#334155'" />
        <button id="add-memory-btn" class="btn-primary" style="text-align: left; justify-content: left;">
          <i class="fas fa-plus"></i> Aggiungi
        </button>
      </div>
    </div>
    <div class="grid-3" id="my-memories-grid"></div>
    </div>
  </div>
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>Astral Cup</h3>
          <p>
            La piattaforma competitiva definitiva per dimostrare il tuo
            valore. Unisciti alla community, partecipa ai tornei e scala la
            classifica verso la gloria eterna.
          </p>
          <div class="social-links">
              <a href="https://discord.gg/TXwYrtmZ42"><i class="fab fa-discord"></i></a>
          </div>
        </div>
        <div class="footer-section">
          <h3>Navigazione</h3>
          <ul class="footer-links">
            <li><a href="/">Home</a></li>
            <li><a href="/tornei">Tornei</a></li>
            <li><a href="/classifica">Classifica</a></li>
            <li><a href="/staff">Staff</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Supporto</h3>
          <ul class="footer-links">
            <li><a href="/bwrules">Regolamento</a></li>
            <li><a href="#">FAQ</a></li>
            <li><a href="#">Contattaci</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2023 Astral Cup. Tutti i diritti riservati.</p>
      </div>
    </div>
  </footer>
  <script src="/js/navbar.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/socket.js"></script>
  <script src="/js/app.js"></script>
  <script src="/js/profile.js"></script>
  <script src="/js/safe-load.js"></script>
</body>

</html>